import{a as X}from"./chunk-IZUREK7C.js";import{b as Z}from"./chunk-6IJVIIZO.js";import{a as S,b as Y}from"./chunk-XHVXFWDQ.js";import"./chunk-NAR25S56.js";import{a as q,b as j,c as R,f as U,g as V,h as B,i as z}from"./chunk-F3GMECN5.js";import{a as W}from"./chunk-HCF5RDTS.js";import{c as H,d as T}from"./chunk-3RE7YTIY.js";import{a as J,b as K,c as Q}from"./chunk-KN4JBYXP.js";import{a as L,e as N,f as G}from"./chunk-Y6YWBKM7.js";import{b as O,d as r,f as x,g as F,h as k,j as d,o as D,p as E,q as I,s as A}from"./chunk-Q674NIMA.js";import{a as u}from"./chunk-YOT3GOMZ.js";import{c as w}from"./chunk-C2S65IAN.js";import{a as P,c as y}from"./chunk-7YSBFMG3.js";import"./chunk-I2N33OYR.js";import"./chunk-CARY4E7O.js";import{j as _}from"./chunk-EKD5RMQ3.js";import{Jb as t,Kb as e,Lb as s,Sb as C,Xb as b,Ya as M,bb as i,d as p,ec as n,ga as o,ka as h,mc as v,yb as c,zb as g}from"./chunk-X7VXIKXH.js";var $=class f{btnDisabled=!1;baseUrl=u.baseUrl;title=o(_);dialogService=o(Z);cookieService=o(Y);authService=o(S);snackbar=o(W);router=o(w);loginForm=new k({email:new d("",r.compose([r.email,r.required])),password:new d("",r.compose([r.required])),politica:new d(!1,r.requiredTrue)});ngOnInit(){this.title.setTitle("Acceder < Cl\xEDnica veterinaria La Huella")}login(){return p(this,null,function*(){this.dialogService.openSpinner(),this.loginForm.valid?(this.btnDisabled=!0,this.authService.login(this.loginForm.value).subscribe({next:a=>p(this,null,function*(){if(this.btnDisabled=!1,this.dialogService.closeAll(),a.data){let l=new Date(Date.now()+36e5);this.cookieService.set("_user_lh",a.data,{path:"/",expires:l,secure:!0,sameSite:"Strict"}),this.cookieService.delete("lh_xsrf_token","/",u.frontDomain)}yield this.router.navigate(["/admin"])}),error:a=>{this.btnDisabled=!1,this.dialogService.closeAll(),a.status===401?this.snackbar.open("Usuario y/o contrase\xF1a incorrectos.","Aceptar",{duration:3e3}):this.snackbar.open("Ha ocurrido un error.","Aceptar",{duration:3e3})}})):(this.dialogService.closeAll(),this.snackbar.open("El email y/o contrase\xF1a no son v\xE1lidos.","Aceptar",{duration:3e3}))})}static \u0275fac=function(l){return new(l||f)};static \u0275cmp=h({type:f,selectors:[["app-login"]],standalone:!0,features:[v],decls:34,vars:11,consts:[[1,"login-section"],[1,"logo-app"],["mat-card-image","","src","assets/logo/lahuella.png","alt","Photo of a Shiba Inu"],[1,"login-form"],[1,"login-card"],["ngNativeValidate","",3,"submit","formGroup"],["cols","2","rowHeight","2.5:1",1,"input-list"],[3,"colspan","rowspan"],[1,"email-input","form-field"],["type","email","matInput","","formControlName","email","required",""],[1,"password-input","form-field"],["type","password","matInput","","formControlName","password","required",""],["formControlName","politica",1,"checkbox"],["type","submit","mat-flat-button","",1,"acceder",3,"disabled"],[1,"links"],["href",""],[1,"politica"],[3,"href"]],template:function(l,m){l&1&&(t(0,"main",0)(1,"section",1),s(2,"img",2),e(),t(3,"section",3)(4,"mat-card",4)(5,"mat-card-header")(6,"mat-card-title")(7,"h1"),n(8,"Inicio de sesi\xF3n"),e()()(),t(9,"form",5),C("submit",function(){return m.login()}),t(10,"mat-card-content")(11,"mat-grid-list",6)(12,"mat-grid-tile",7)(13,"mat-form-field",8)(14,"mat-label"),n(15,"Correo electr\xF3nico: "),e(),s(16,"input",9),e()(),t(17,"mat-grid-tile",7)(18,"mat-form-field",10)(19,"mat-label"),n(20,"Contrase\xF1a: "),e(),s(21,"input",11),e()()()(),t(22,"mat-card-footer")(23,"mat-checkbox",12),n(24,"Acepto la pol\xEDtica de privacidad."),e(),t(25,"button",13),n(26,"Acceder"),e()()()()(),t(27,"section",14)(28,"p")(29,"a",15),n(30,"\u2190 Volver a La Huella"),e()()(),t(31,"section",16)(32,"a",17),n(33,"Pol\xEDtica de privacidad"),e()()()),l&2&&(i(9),c("formGroup",m.loginForm),i(3),c("colspan",2)("rowspan",1),i(),g("width",100,"%"),i(4),c("colspan",2)("rowspan",1),i(),g("width",100,"%"),i(7),c("disabled",!m.loginForm.valid||m.btnDisabled),i(7),b("href",m.baseUrl+"/politica-privacidad",M))},dependencies:[z,q,R,V,U,B,j,Q,K,J,G,N,L,T,H,y,P,X,A,O,x,F,I,D,E],styles:[".login-section[_ngcontent-%COMP%]{margin:0 auto}.logo-app[_ngcontent-%COMP%]{display:flex;justify-content:center;margin:2rem}.logo-app[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:35%}.login-card[_ngcontent-%COMP%]{padding:1rem}.login-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]{justify-content:center}.login-card[_ngcontent-%COMP%]   mat-card-title[_ngcontent-%COMP%]{margin:1rem 0}.login-card[_ngcontent-%COMP%]   mat-card-footer[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.checkbox[_ngcontent-%COMP%]{margin-left:.5rem}button.acceder[_ngcontent-%COMP%]{width:30%;margin:1em 1rem 1rem 2rem;text-align:center;color:#fff;background-color:var(--lightbrown)}.links[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:left;gap:2rem;margin:2rem}.links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;color:var(--dark)}.links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:var(--lightbrown)}.politica[_ngcontent-%COMP%]{text-align:center;margin:3rem 0}.politica[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:var(--lightbrown)}@media only screen and (min-width: 1367px){.login-section[_ngcontent-%COMP%]{width:30%;padding:5rem 0}}@media only screen and (max-width: 767px){.login-section[_ngcontent-%COMP%]{width:100%;padding:2rem 1rem}}@media only screen and (min-width: 768px) and (max-width: 1366px){.login-section[_ngcontent-%COMP%]{width:50%;padding:3rem 0}}"]})};export{$ as LoginComponent};

import{a as X}from"./chunk-34JUEJJQ.js";import{a as N,b as U,c as j,d as V,e as q,f as G,h as J,i as K}from"./chunk-F3GMECN5.js";import{a as Q}from"./chunk-F4DSBIY5.js";import{a as W}from"./chunk-HCF5RDTS.js";import{a as H}from"./chunk-MUSOTDIH.js";import{a as z,b as $}from"./chunk-MMBU7MTY.js";import"./chunk-VNGDVROV.js";import"./chunk-ABJ3EAOD.js";import{a as F,c as R,d as A}from"./chunk-C2S65IAN.js";import"./chunk-7YSBFMG3.js";import"./chunk-I2N33OYR.js";import"./chunk-CARY4E7O.js";import{i as k,j as L}from"./chunk-EKD5RMQ3.js";import{Eb as c,Ec as y,Hb as P,Ib as h,Jb as n,Kb as o,Lb as l,Ub as p,Vc as B,Xb as v,Ya as u,Yb as x,bb as a,e as C,ec as s,ed as I,fc as d,fd as T,ga as r,gc as M,gd as D,hc as b,ka as f,lc as O,mc as S,qc as _,sc as E,tb as m,tc as w}from"./chunk-X7VXIKXH.js";var Z=(t,i)=>i.id;function tt(t,i){if(t&1&&l(0,"img",4),t&2){let e=p(2);x("src","",e.filesEndPoint+e.post.imagen,"&sz=w500",u)}}function et(t,i){t&1&&l(0,"img",5)}function it(t,i){if(t&1&&(n(0,"h1",3),s(1),o(),n(2,"p"),s(3),_(4,"date"),o(),m(5,tt,1,2,"img",4)(6,et,1,0,"img",5),n(7,"p",6),s(8),o()),t&2){let e=p();a(),d(e.post.titulo),a(2),b("Publicado el ",E(4,5,e.post.created_at,"fullDate")," | Categor\xEDa: ",e.post.categoria!=null?e.post.categoria:"Sin categor\xEDa",""),a(2),c(e.post.imagen?5:6),a(3),d(e.post.contenido)}}function nt(t,i){t&1&&(n(0,"p"),s(1,"No se ha encontrado el post."),o())}function ot(t,i){if(t&1&&l(0,"img",8),t&2){let e=p().$implicit,g=p();v("src",g.filesEndPoint+e.imagen,u)}}function at(t,i){t&1&&l(0,"img",9)}function st(t,i){if(t&1&&(n(0,"mat-card-subtitle"),s(1),o()),t&2){let e=p().$implicit;a(),d(e.categoria)}}function rt(t,i){t&1&&(n(0,"mat-card-subtitle"),s(1,"Sin categor\xEDa"),o())}function lt(t,i){if(t&1&&(n(0,"article")(1,"mat-card",7),m(2,ot,1,1,"img",8)(3,at,1,0,"img",9),n(4,"mat-card-header")(5,"mat-card-title",10),s(6),o(),m(7,st,2,1,"mat-card-subtitle")(8,rt,2,0,"mat-card-subtitle"),o(),n(9,"mat-card-content")(10,"p"),s(11),_(12,"slice"),o()(),n(13,"mat-card-actions")(14,"a",11),s(15,"Leer m\xE1s"),o()()()()),t&2){let e=i.$implicit;a(2),c(e.imagen?2:3),a(4),d(e.titulo),a(),c(e.categoria!=null?7:8),a(4),M(" ",e.contenido.length>60?w(12,6,e.contenido,0,60)+"...":e.contenido," "),a(3),x("routerLink","/blog/",e.slug,"")}}function pt(t,i){t&1&&(n(0,"p"),s(1,"No se han encontrado posts."),o())}B(X,"es");var Y=class t{slug="";post={};lastposts=[];filesEndPoint=H.DriveEndPoint;suscripcion=new C;title=r(L);meta=r(k);activatedRoute=r(F);router=r(R);postService=r(Q);snackbar=r(W);ngOnInit(){this.getLastPosts(),this.suscripcion=this.activatedRoute.paramMap.subscribe(i=>{this.slug=this.activatedRoute.snapshot.params.slug,this.getPost()})}ngOnDestroy(){this.suscripcion.unsubscribe()}getPost(){this.slug&&this.postService.getPostBySlug(this.slug).subscribe({next:i=>{this.post=i.data[0],this.title.setTitle(`${this.post.titulo} - Cl\xEDnica veterinaria La Huella`),this.meta.updateTag({name:"description",content:this.post.metadescription?this.post.metadescription:"Entrada de blog sobre el mundo animal."}),this.meta.updateTag({name:"keywords",content:this.post.keywords?this.post.keywords:"blog, novedades, noticias animales, noticias mundo animal"})},error:i=>{i.status===404?this.snackbar.open("Post no encontrado.","Aceptar",{duration:3e3}):this.snackbar.open("Ha ocurrido un error.","Aceptar",{duration:3e3})}})}getLastPosts(){this.postService.getPosts({estado:"publicado",limit:3}).subscribe({next:i=>{this.lastposts=i.data}})}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=f({type:t,selectors:[["app-blog-post"]],standalone:!0,features:[O([{provide:y,useValue:"es"}]),S],decls:13,vars:2,consts:[[1,"post","py-12","pt-12","lg:px-24","md:px-5"],[1,"lastposts"],[1,"lastposts-container"],[1,"txt-lightbrown"],["alt","Imagen de portada del post",3,"src"],["src","assets/img/sinimagen.png","alt","Sin imagen"],[1,"post-content"],["appearance","outlined",1,"post-card"],["mat-card-image","","alt","Imagen de portada del post",3,"src"],["mat-card-image","","src","assets/img/sinimagen.png","alt","Sin imagen"],[1,"txt-lightbrown","font-semibold"],[3,"routerLink"]],template:function(e,g){e&1&&(l(0,"app-header"),n(1,"main")(2,"section",0),m(3,it,9,8)(4,nt,2,0,"p"),o(),n(5,"aside",1)(6,"h3"),s(7,"\xDAltimos posts"),o(),n(8,"div",2),P(9,lt,16,10,"article",null,Z,!1,pt,2,0,"p"),o()()(),l(12,"app-footer")),e&2&&(a(3),c(g.post?3:4),a(6),h(g.lastposts))},dependencies:[z,$,D,T,I,A,K,N,q,j,G,J,V,U],styles:["main[_ngcontent-%COMP%]{display:flex;margin:2rem}@media (max-width: 1023px){main[_ngcontent-%COMP%]{flex-direction:column;margin:1rem}}.post[_ngcontent-%COMP%]{text-align:center;width:70%;display:flex;flex-direction:column;gap:2rem}@media (max-width: 1023px){.post[_ngcontent-%COMP%]{width:100%}}.post[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:var(--lengthLg1)}.post[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:500px;margin:0 auto}@media (max-width: 767px){.post[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:300px}}@media (max-width: 1023px){.post[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:400px}}p.post-content[_ngcontent-%COMP%]{white-space:pre-line;text-align:start}aside[_ngcontent-%COMP%]{margin:2rem 0}.lastposts[_ngcontent-%COMP%]{width:30%}@media (max-width: 1023px){.lastposts[_ngcontent-%COMP%]{width:100%}}.lastposts[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{text-align:center;font-size:var(--lengthMd3)}@media (max-width: 1023px){.lastposts-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:2rem}}.lastposts[_ngcontent-%COMP%]   article[_ngcontent-%COMP%]{margin:2rem 0;max-width:40vh}a[_ngcontent-%COMP%]{color:var(--lightbrown);padding:0 .5rem}a[_ngcontent-%COMP%]:hover{color:var(--dark)}"]})};export{Y as BlogPostComponent};

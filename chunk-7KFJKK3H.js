import{a as K}from"./chunk-IZUREK7C.js";import{b as W}from"./chunk-6IJVIIZO.js";import{a as v,b as Q}from"./chunk-UDZ5P3Q7.js";import"./chunk-NAR25S56.js";import{a as G,b as H,c as T,f as q,g as j,h as R,i as V}from"./chunk-F3GMECN5.js";import{a as J}from"./chunk-HCF5RDTS.js";import{c as L,d as N}from"./chunk-3RE7YTIY.js";import{a as B,b as U,c as z}from"./chunk-KN4JBYXP.js";import{a as E,e as A,f as I}from"./chunk-Y6YWBKM7.js";import{b as S,d as r,f as P,g as y,h as O,j as d,o as x,p as F,q as k,s as D}from"./chunk-Q674NIMA.js";import"./chunk-T3KVQUPB.js";import{c as b}from"./chunk-C2S65IAN.js";import{a as _,c as w}from"./chunk-7YSBFMG3.js";import"./chunk-I2N33OYR.js";import"./chunk-CARY4E7O.js";import{j as h}from"./chunk-EKD5RMQ3.js";import{Jb as t,Kb as e,Lb as s,Sb as M,bb as o,d as p,ec as i,ga as n,ka as f,mc as C,yb as m,zb as g}from"./chunk-X7VXIKXH.js";var X=class u{btnDisabled=!1;title=n(h);dialogService=n(W);cookieService=n(Q);authService=n(v);snackbar=n(J);router=n(b);loginForm=new O({email:new d("",r.compose([r.email,r.required])),password:new d("",r.compose([r.required])),politica:new d(!1,r.requiredTrue)});ngOnInit(){this.title.setTitle("Acceder < Cl\xEDnica veterinaria La Huella")}login(){return p(this,null,function*(){this.dialogService.openSpinner(),this.loginForm.valid?(this.btnDisabled=!0,this.authService.login(this.loginForm.value).subscribe({next:a=>p(this,null,function*(){if(this.btnDisabled=!1,this.dialogService.closeAll(),a.data){let l=new Date(Date.now()+36e5);this.cookieService.set("_user_lh",a.data,{expires:l,secure:!0,sameSite:"Strict"}),this.cookieService.delete("_xsrf_token")}yield this.router.navigate(["/admin"])}),error:a=>{this.btnDisabled=!1,this.dialogService.closeAll(),a.status===401?this.snackbar.open("Usuario y/o contrase\xF1a incorrectos.","Aceptar",{duration:3e3}):this.snackbar.open("Ha ocurrido un error.","Aceptar",{duration:3e3})}})):(this.dialogService.closeAll(),this.snackbar.open("El email y/o contrase\xF1a no son v\xE1lidos.","Aceptar",{duration:3e3}))})}static \u0275fac=function(l){return new(l||u)};static \u0275cmp=f({type:u,selectors:[["app-login"]],standalone:!0,features:[C],decls:34,vars:10,consts:[[1,"login-section"],[1,"logo-app"],["mat-card-image","","src","assets/logo/lahuella.png","alt","Photo of a Shiba Inu"],[1,"login-form"],[1,"login-card"],["ngNativeValidate","",3,"submit","formGroup"],["cols","2","rowHeight","2.5:1",1,"input-list"],[3,"colspan","rowspan"],[1,"email-input","form-field"],["type","email","matInput","","formControlName","email","required",""],[1,"password-input","form-field"],["type","password","matInput","","formControlName","password","required",""],["formControlName","politica",1,"checkbox"],["type","submit","mat-flat-button","",1,"acceder",3,"disabled"],[1,"links"],["href",""],[1,"politica"],["href","/politica-privacidad"]],template:function(l,c){l&1&&(t(0,"main",0)(1,"section",1),s(2,"img",2),e(),t(3,"section",3)(4,"mat-card",4)(5,"mat-card-header")(6,"mat-card-title")(7,"h1"),i(8,"Inicio de sesi\xF3n"),e()()(),t(9,"form",5),M("submit",function(){return c.login()}),t(10,"mat-card-content")(11,"mat-grid-list",6)(12,"mat-grid-tile",7)(13,"mat-form-field",8)(14,"mat-label"),i(15,"Correo electr\xF3nico: "),e(),s(16,"input",9),e()(),t(17,"mat-grid-tile",7)(18,"mat-form-field",10)(19,"mat-label"),i(20,"Contrase\xF1a: "),e(),s(21,"input",11),e()()()(),t(22,"mat-card-footer")(23,"mat-checkbox",12),i(24,"Acepto la pol\xEDtica de privacidad."),e(),t(25,"button",13),i(26,"Acceder"),e()()()()(),t(27,"section",14)(28,"p")(29,"a",15),i(30,"\u2190 Volver a La Huella"),e()()(),t(31,"section",16)(32,"a",17),i(33,"Pol\xEDtica de privacidad"),e()()()),l&2&&(o(9),m("formGroup",c.loginForm),o(3),m("colspan",2)("rowspan",1),o(),g("width",100,"%"),o(4),m("colspan",2)("rowspan",1),o(),g("width",100,"%"),o(7),m("disabled",!c.loginForm.valid||c.btnDisabled))},dependencies:[V,G,T,j,q,R,H,z,U,B,I,A,E,N,L,w,_,K,D,S,P,y,k,x,F],styles:[".login-section[_ngcontent-%COMP%]{margin:0 auto}.logo-app[_ngcontent-%COMP%]{display:flex;justify-content:center;margin:2rem}.logo-app[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:35%}.login-card[_ngcontent-%COMP%]{padding:1rem}.login-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]{justify-content:center}.login-card[_ngcontent-%COMP%]   mat-card-title[_ngcontent-%COMP%]{margin:1rem 0}.login-card[_ngcontent-%COMP%]   mat-card-footer[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.checkbox[_ngcontent-%COMP%]{margin-left:.5rem}button.acceder[_ngcontent-%COMP%]{width:30%;margin:1em 1rem 1rem 2rem;text-align:center;color:#fff;background-color:var(--lightbrown)}.links[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:left;gap:2rem;margin:2rem}.links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;color:var(--dark)}.links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:var(--lightbrown)}.politica[_ngcontent-%COMP%]{text-align:center;margin:3rem 0}.politica[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:var(--lightbrown)}@media only screen and (min-width: 1367px){.login-section[_ngcontent-%COMP%]{width:30%;padding:5rem 0}}@media only screen and (max-width: 767px){.login-section[_ngcontent-%COMP%]{width:100%;padding:2rem 1rem}}@media only screen and (min-width: 768px) and (max-width: 1366px){.login-section[_ngcontent-%COMP%]{width:50%;padding:3rem 0}}"]})};export{X as LoginComponent};
